plugins {
    alias libs.plugins.android.application
    alias libs.plugins.kotlin.android
    alias libs.plugins.compose.compiler
    alias libs.plugins.hilt.android
    alias libs.plugins.kotlin.serialization
    alias libs.plugins.google.devtools.ksp
    id 'kotlin-kapt'
    id 'kotlin-parcelize'
}

android {
    namespace 'ir.miare.androidcodechallenge'
    compileSdk 35

    defaultConfig {
        applicationId "ir.miare.androidcodechallenge"
        minSdk 21
        targetSdk 35
        versionCode 1
        versionName "1.0"

        testInstrumentationRunner "androidx.test.runner.AndroidJUnitRunner"
    }

    buildTypes {
        debug {
            buildConfigField "String", "BASE_URL", "\"https://test_baseurl.com/v2/\""
        }

        release {
            minifyEnabled false
            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'
        }
    }
    compileOptions {
        sourceCompatibility JavaVersion.VERSION_17
        targetCompatibility JavaVersion.VERSION_17
    }
    kotlinOptions {
        jvmTarget = '17'
    }
    packaging {
        resources {
            excludes.add("/META-INF/{AL2.0,LGPL2.1}")
            excludes.add("META-INF/LICENSE.md")
            excludes.add("META-INF/LICENSE-notice.md")
        }
    }
    buildFeatures {
        buildConfig true
        viewBinding true
        compose true
    }
}

dependencies {

    implementation libs.core.ktx
    implementation libs.appcompat
    implementation libs.material
    implementation libs.constraintlayout
    implementation libs.fragment.ktx
    implementation libs.lifecycle.viewmodel.ktx

    implementation(platform libs.androidx.compose.bom)
    implementation(libs.bundles.compose)
    debugImplementation libs.androidx.ui.tooling
    debugImplementation libs.androidx.ui.test.manifest
    implementation libs.androidx.ui.tooling.preview

    implementation libs.bundles.ktor

    testImplementation libs.junit
    testImplementation libs.robolectric
    testImplementation libs.shadows.multidex
    testImplementation libs.coroutines.test

    androidTestImplementation libs.test.ext.junit
    androidTestImplementation libs.espresso.core
    androidTestImplementation(platform libs.androidx.compose.bom)
    androidTestImplementation libs.androidx.ui.test.junit4

    testImplementation libs.mockk
    androidTestImplementation libs.mockk.android

    implementation libs.jackson.module.kotlin
    implementation libs.jackson.datatype.joda
    implementation(libs.jackson.datatype.json.org) {
        exclude group: 'org.json', module: 'json'
    }
    implementation libs.retrofit
    implementation libs.converter.jackson
    implementation libs.logging.interceptor
    implementation libs.mockfit.runtime
    kapt libs.mockfit.compiler

    implementation libs.coroutines.android
    implementation libs.coroutines.core
    testImplementation libs.coroutines.test

    implementation libs.hilt.android
    ksp libs.hilt.compiler
}
